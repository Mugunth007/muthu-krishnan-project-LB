{"ast":null,"code":"var _jsxFileName = \"/workspaces/codespaces-blank/FrontEnd/src/screens/login.js\",\n    _s = $RefreshSig$();\n\nimport '../css/login.css';\nimport { useState, useContext, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { AuthContext } from '../context/authProvider';\nimport axios from '../api/axios';\nimport { useToasts } from 'react-toast-notifications';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LOGIN_URL = '/auth/signin';\nexport default function LoginCard() {\n  _s();\n\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const {\n    setToken,\n    setRole,\n    setUser\n  } = useContext(AuthContext);\n  const {\n    addToast\n  } = useToasts();\n  useEffect(() => {\n    sessionStorage.removeItem('token');\n    sessionStorage.removeItem('role');\n    setToken('');\n    setRole('');\n  }, []);\n\n  const handleSubmit = async props => {\n    props.preventDefault();\n\n    try {\n      const response = await axios.post(LOGIN_URL, JSON.stringify({\n        Email: email,\n        password\n      })); // if(response.data=='invalid email or password');\n      // addToast(response.data,{appearance:'error'});\n\n      sessionStorage.setItem('token', response.data.token);\n      sessionStorage.setItem('role', response.data.user.role);\n      setToken(response.data.token);\n      setRole(response.data.user.role);\n      setUser(response.data.user);\n      setEmail('');\n      setPassword('');\n      response.data.user.role == 'user' ? navigate('/home') : navigate('/home/books');\n      console.log(\"done\");\n      addToast('succesfully logged in', {\n        appearance: 'success'\n      });\n    } catch (e) {\n      console.log(e);\n      addToast(\"invalid email or password\", {\n        appearance: 'error'\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"triangle-up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            htmlFor: \"email\",\n            autoComplete: \"off\",\n            onChange: e => setEmail(e.target.value),\n            value: email,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"Email Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            htmlFor: \"password\",\n            autoComplete: \"off\",\n            onChange: e => setPassword(e.target.value),\n            value: password,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"field\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"signup-link\",\n          children: [\"Not a member?  \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/signup\",\n            children: \"Signup now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 55\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(LoginCard, \"My0zsDLpXvomHb4FmW8jqEeYHjc=\", false, function () {\n  return [useNavigate, useToasts];\n});\n\n_c = LoginCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginCard\");","map":{"version":3,"sources":["/workspaces/codespaces-blank/FrontEnd/src/screens/login.js"],"names":["useState","useContext","useEffect","useNavigate","Link","AuthContext","axios","useToasts","LOGIN_URL","LoginCard","navigate","email","setEmail","password","setPassword","setToken","setRole","setUser","addToast","sessionStorage","removeItem","handleSubmit","props","preventDefault","response","post","JSON","stringify","Email","setItem","data","token","user","role","console","log","appearance","e","target","value"],"mappings":"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","sourcesContent":["import '../css/login.css'\nimport { useState, useContext, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { AuthContext } from '../context/authProvider';\nimport axios from '../api/axios';\nimport { useToasts } from 'react-toast-notifications';\n\n\nconst LOGIN_URL = '/auth/signin';\n\n\nexport default function LoginCard() {\n\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n\n\n  const { setToken, setRole, setUser } = useContext(AuthContext);\n  const { addToast } = useToasts();\n  useEffect(() => {\n    sessionStorage.removeItem('token');\n    sessionStorage.removeItem('role');\n    setToken('');\n    setRole('');\n  }, [])\n\n  const handleSubmit = async (props) => {\n    props.preventDefault();\n\n\n    try {\n      const response = await axios.post(LOGIN_URL, JSON.stringify({ Email: email, password }));\n      // if(response.data=='invalid email or password');\n      // addToast(response.data,{appearance:'error'});\n\n      sessionStorage.setItem('token', response.data.token);\n      sessionStorage.setItem('role', response.data.user.role);\n      setToken(response.data.token);\n      setRole(response.data.user.role);\n      setUser(response.data.user);\n      setEmail('');\n      setPassword('');\n\n      response.data.user.role == 'user' ? navigate('/home') : navigate('/home/books');\n      console.log(\"done\");\n      addToast('succesfully logged in', { appearance: 'success' });\n    }\n    catch (e) {\n      console.log(e);\n      addToast(\"invalid email or password\", { appearance: 'error' });\n\n    }\n\n  }\n\n  return (\n    <><div id=\"triangle-up\"></div>\n      <div className=\"wrapper\">\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"field\">\n            <input\n              type=\"email\"\n              htmlFor='email'\n              autoComplete='off'\n              onChange={(e) => setEmail(e.target.value)}\n              value={email}\n              required />\n            <label htmlFor='email'>Email Address</label>\n          </div>\n          <div className=\"field\">\n            <input type=\"password\"\n              htmlFor='password'\n              autoComplete='off'\n              onChange={(e) => setPassword(e.target.value)}\n              value={password}\n              required\n            />\n            <label htmlFor='password'>Password</label>\n          </div>\n\n          <div className=\"field\">\n            <input type=\"submit\" value=\"Login\" />\n          </div>\n\n          <div className=\"signup-link\">Not a member?  <Link to='/signup'>Signup now</Link></div>\n        </form>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}