{"ast":null,"code":"var _jsxFileName = \"/workspaces/codespaces-blank/FrontEnd/src/context/authProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useState, useReducer, useEffect } from \"react\";\nimport axios from \"../api/axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({});\n\nconst getdate = () => {\n  const d = new Date();\n  const day = d.getDate();\n  const month = d.getMonth() + 1;\n  const year = d.getFullYear();\n  const date = `${day}/${month}/${year}`;\n  return date;\n};\n\nconst returndate = () => {\n  const targetDate = new Date();\n  targetDate.setDate(targetDate.getDate() + 14);\n  var dd = targetDate.getDate();\n  var mm = targetDate.getMonth() + 1; // 0 is January, so we must add 1\n\n  var yyyy = targetDate.getFullYear();\n  var dateString = `${dd}/${mm}/${yyyy}`;\n  return dateString;\n}; // const BookReducer = (state,action)=>{\n//     switch(action.type){\n//         case 'get_books':\n//             console.log(action.payload);\n//             return action.payload\n//         default:\n//             return state;\n//     }\n// }\n\n\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [token, setToken] = useState(sessionStorage.getItem('token'));\n  const [issue, setIssue] = useState([]);\n  const [entertainment, setEntertainment] = useState([]);\n  const [humour, setHumour] = useState([]);\n  const [biography, setBiography] = useState([]);\n  const [poetry, setPoetry] = useState([]);\n  const [art, setArt] = useState([]);\n  const [returned, setReturned] = useState([]);\n  const [results, setResults] = useState([]);\n  const [role, setRole] = useState(sessionStorage.getItem('role'));\n  const [requested, setRequested] = useState([]);\n  const [fine, setFine] = useState(0);\n  const [requestStatus, setRequestStatus] = useState([]);\n  const [user, setUser] = useState({});\n  const [allbooks, setAllBooks] = useState([]); // const [books,dispatch] = useReducer(BookReducer,[])\n\n  const update = () => {};\n\n  const getIssueBooks = async () => {\n    try {\n      const response = await axios.get('/api/getissuebooks', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setIssue(response.data);\n    } catch (e) {\n      console.log(e.response);\n    }\n  };\n\n  const getBooks = async id => {\n    try {\n      const response = await axios.get(`/api/searchm/category/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }); //   dispatch({type:'get_books',payload:response.data})\n\n      if (id === 'Entertainment') {\n        setEntertainment(response.data);\n      } else if (id === 'Humour') {\n        setHumour(response.data);\n      } else if (id === 'Biography') {\n        setBiography(response.data);\n      } else if (id === 'Poetry-Drama') {\n        setPoetry(response.data);\n      } else if (id === 'Art-Photography') {\n        setArt(response.data);\n      } else {\n        setResults(response.data);\n      }\n    } catch (e) {\n      console.log(e.response);\n    }\n  };\n\n  const issueBooks = async Book => {\n    try {\n      await axios.post('/api/issued-books', JSON.stringify({\n        Name: Book.name,\n        image: Book.image,\n        author: Book.author,\n        isbn: Book.isbn,\n        IssuedOn: getdate(),\n        returnDate: returndate()\n      }), {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (e) {\n      console.log(e.response);\n    }\n  };\n\n  const getStatus = async () => {\n    try {\n      const response = await axios.get('/api/requestedBooks-status', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setRequestStatus(response.data);\n    } catch (e) {\n      console.log(e.response);\n    }\n  }; // const returnBooks=async(Book)=>{\n  //     try{\n  //         await axios.post('/returned-books',JSON.stringify({Name:Book.Name,author:Book.author,isbn:Book.isbn,issuedOn:Book.IssuedOn,returnedOn:'1'}),\n  //         {\n  //             headers:{\n  //             Authorization:`Bearer ${token}`}\n  //           })\n  //     }\n  //     catch(e){\n  //         console.log(e.data);\n  //         console.log(e);\n  //     }\n  // }\n\n\n  const getReturnBooks = async () => {\n    try {\n      const response = await axios.get('/api/getreturnbooks', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setReturned(response.data);\n    } catch (e) {\n      console.log(e.response);\n    }\n  };\n\n  const deleteIssue = async isbn => {\n    try {\n      await axios.post(`/api/delete-issue/`, JSON.stringify({\n        isbn\n      }), {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (e) {\n      console.log(e.response);\n    }\n  };\n\n  const requestbook = async (bookName, author) => {\n    console.log(bookName, author);\n\n    try {\n      await axios.post('/api/request', JSON.stringify({\n        bookName,\n        author\n      }), {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const searchbook = async (option, search) => {\n    try {\n      console.log(option);\n      const response = await axios.get(`/api/searchm/${option}/${search}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setResults(response.data);\n      console.log(\"results = \" + response.data);\n    } catch (e) {\n      console.log(\"results = \" + results);\n      console.log(e);\n    }\n  };\n\n  const getRequestedBooks = async () => {\n    try {\n      const response = await axios.get('/api/getrequest', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setRequested(response.data);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const deletereq = async book => {\n    try {\n      await axios.post('/api/deletereq', JSON.stringify({\n        name: book.name\n      }), {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const addbook = async book => {\n    try {\n      await axios.post('/api/addbook', JSON.stringify({\n        image: book.image,\n        name: book.name,\n        isbn: book.isbn,\n        author: book.author,\n        category: book.category,\n        book_depository_stars: book.book_depository_stars\n      }), {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(\"check\");\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const getFine = async () => {\n    try {\n      const response = await axios.get('/api/getfine', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setFine(response.data[0].fine);\n      console.log(response.data[0].fine);\n    } catch (e) {\n      console.log(e.response.data);\n    }\n  };\n\n  const deleteBook = async isbn => {\n    try {\n      const response = await axios.post('/api/deletebook', JSON.stringify({\n        isbn\n      }), {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(response.data);\n      return response.data;\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const updateStatus = async (key, option) => {\n    try {\n      const response = await axios.post(`/api/updatestatus/${key}/${option}`, JSON.stringify({\n        key\n      }), {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (e) {\n      console.log(e.response.data);\n    }\n  };\n\n  const UpdateBook = async Book => {\n    try {\n      const response = await axios.post(`/api/updateBook`, JSON.stringify(Book), {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token,\n      getIssueBooks,\n      setIssue,\n      issue,\n      entertainment,\n      biography,\n      humour,\n      poetry,\n      art,\n      getBooks,\n      issueBooks,\n      getReturnBooks,\n      returned,\n      deleteIssue,\n      requestbook,\n      results,\n      searchbook,\n      role,\n      getRequestedBooks,\n      requested,\n      deletereq,\n      addbook,\n      getFine,\n      fine,\n      deleteBook,\n      setToken,\n      setRole,\n      update,\n      role,\n      getStatus,\n      requestStatus,\n      updateStatus,\n      UpdateBook,\n      user,\n      setUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 322,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthProvider, \"5YRB1/V0tAcoXrkyGNcVUv0fI94=\");\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/workspaces/codespaces-blank/FrontEnd/src/context/authProvider.js"],"names":["React","createContext","useState","useReducer","useEffect","axios","AuthContext","getdate","d","Date","day","getDate","month","getMonth","year","getFullYear","date","returndate","targetDate","setDate","dd","mm","yyyy","dateString","AuthProvider","children","token","setToken","sessionStorage","getItem","issue","setIssue","entertainment","setEntertainment","humour","setHumour","biography","setBiography","poetry","setPoetry","art","setArt","returned","setReturned","results","setResults","role","setRole","requested","setRequested","fine","setFine","requestStatus","setRequestStatus","user","setUser","allbooks","setAllBooks","update","getIssueBooks","response","get","headers","Authorization","data","e","console","log","getBooks","id","issueBooks","Book","post","JSON","stringify","Name","name","image","author","isbn","IssuedOn","returnDate","getStatus","getReturnBooks","deleteIssue","requestbook","bookName","searchbook","option","search","getRequestedBooks","deletereq","book","addbook","category","book_depository_stars","getFine","deleteBook","updateStatus","key","UpdateBook"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useReducer, useEffect } from \"react\";\nimport axios from \"../api/axios\";\n\nexport const AuthContext = createContext({});\n\n\nconst getdate = () => {\n    const d = new Date();\n    const day = d.getDate();\n    const month = d.getMonth() + 1;\n    const year = d.getFullYear();\n    const date = `${day}/${month}/${year}`;\n    return date;\n}\nconst returndate = () => {\n    const targetDate = new Date();\n    targetDate.setDate(targetDate.getDate() + 14);\n    var dd = targetDate.getDate();\n    var mm = targetDate.getMonth() + 1; // 0 is January, so we must add 1\n    var yyyy = targetDate.getFullYear();\n\n    var dateString = `${dd}/${mm}/${yyyy}`;\n    return dateString\n}\n\n// const BookReducer = (state,action)=>{\n//     switch(action.type){\n//         case 'get_books':\n//             console.log(action.payload);\n//             return action.payload\n\n//         default:\n//             return state;\n//     }\n// }\n\nexport const AuthProvider = ({ children }) => {\n\n    const [token, setToken] = useState(sessionStorage.getItem('token'));\n    const [issue, setIssue] = useState([]);\n    const [entertainment, setEntertainment] = useState([]);\n    const [humour, setHumour] = useState([]);\n    const [biography, setBiography] = useState([]);\n    const [poetry, setPoetry] = useState([]);\n    const [art, setArt] = useState([]);\n    const [returned, setReturned] = useState([]);\n    const [results, setResults] = useState([]);\n    const [role, setRole] = useState(sessionStorage.getItem('role'));\n    const [requested, setRequested] = useState([]);\n    const [fine, setFine] = useState(0);\n    const [requestStatus, setRequestStatus] = useState([]);\n    const [user, setUser] = useState({});\n    const [allbooks, setAllBooks] = useState([]);\n    // const [books,dispatch] = useReducer(BookReducer,[])\n    const update = () => {\n\n    }\n\n\n\n    const getIssueBooks = async () => {\n        try {\n            const response = await axios.get('/api/getissuebooks',\n                {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                });\n\n\n            setIssue(response.data);\n        }\n        catch (e) {\n            console.log(e.response);\n        }\n    }\n\n    const getBooks = async (id) => {\n\n        try {\n            const response = await axios.get(`/api/searchm/category/${id}`,\n                {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                });\n            //   dispatch({type:'get_books',payload:response.data})\n\n            if (id === 'Entertainment') {\n                setEntertainment(response.data);\n            }\n            else if (id === 'Humour') {\n                setHumour(response.data);\n            }\n            else if (id === 'Biography') {\n                setBiography(response.data);\n            }\n            else if (id === 'Poetry-Drama') {\n                setPoetry(response.data);\n            }\n            else if (id === 'Art-Photography') {\n                setArt(response.data);\n            }\n            else {\n                setResults(response.data);\n            }\n\n        }\n        catch (e) {\n            console.log(e.response);\n        }\n    }\n\n\n\n    const issueBooks = async (Book) => {\n        try {\n            await axios.post('/api/issued-books', JSON.stringify({ Name: Book.name, image: Book.image, author: Book.author, isbn: Book.isbn, IssuedOn: getdate(), returnDate: returndate() }),\n                {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                })\n\n        }\n        catch (e) {\n            console.log(e.response);\n        }\n    }\n    const getStatus = async () => {\n        try {\n            const response = await axios.get('/api/requestedBooks-status',\n                {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                })\n            setRequestStatus(response.data);\n        }\n        catch (e) {\n            console.log(e.response);\n        }\n    }\n\n    // const returnBooks=async(Book)=>{\n    //     try{\n    //         await axios.post('/returned-books',JSON.stringify({Name:Book.Name,author:Book.author,isbn:Book.isbn,issuedOn:Book.IssuedOn,returnedOn:'1'}),\n    //         {\n    //             headers:{\n    //             Authorization:`Bearer ${token}`}\n    //           })\n    //     }\n    //     catch(e){\n    //         console.log(e.data);\n    //         console.log(e);\n    //     }\n    // }\n\n    const getReturnBooks = async () => {\n        try {\n            const response = await axios.get('/api/getreturnbooks',\n                {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                })\n\n            setReturned(response.data);\n\n        }\n        catch (e) {\n            console.log(e.response);\n        }\n    }\n\n    const deleteIssue = async (isbn) => {\n\n        try {\n            await axios.post(`/api/delete-issue/`, JSON.stringify({ isbn }),\n                {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                })\n        }\n        catch (e) {\n            console.log(e.response);\n        }\n    }\n\n    const requestbook = async (bookName, author) => {\n        console.log(bookName, author);\n        try {\n            await axios.post('/api/request', JSON.stringify({ bookName, author }), {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            })\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n    const searchbook = async (option, search) => {\n        try {\n            console.log(option);\n            const response = await axios.get(`/api/searchm/${option}/${search}`,\n                {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                })\n            setResults(response.data);\n            console.log(\"results = \" + response.data);\n        }\n        catch (e) {\n            console.log(\"results = \" + results);\n            console.log(e);\n        }\n    }\n\n    const getRequestedBooks = async () => {\n        try {\n            const response = await axios.get('/api/getrequest', {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            })\n            setRequested(response.data)\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n\n    const deletereq = async (book) => {\n        try {\n            await axios.post('/api/deletereq', JSON.stringify({ name: book.name }), {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            })\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n\n    const addbook = async (book) => {\n        try {\n            await axios.post('/api/addbook', JSON.stringify({ image: book.image, name: book.name, isbn: book.isbn, author: book.author, category: book.category, book_depository_stars: book.book_depository_stars }), {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n\n            })\n            console.log(\"check\");\n\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n\n    const getFine = async () => {\n        try {\n            const response = await axios.get('/api/getfine', {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            })\n            setFine(response.data[0].fine);\n            console.log(response.data[0].fine);\n        }\n        catch (e) {\n            console.log(e.response.data);\n        }\n    }\n\n    const deleteBook = async (isbn) => {\n        try {\n            const response = await axios.post('/api/deletebook', JSON.stringify({ isbn }), {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            })\n            console.log(response.data);\n            return response.data;\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n\n    const updateStatus = async (key, option) => {\n        try {\n            const response = await axios.post(`/api/updatestatus/${key}/${option}`, JSON.stringify({ key }), {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            })\n        }\n        catch (e) {\n            console.log(e.response.data);\n        }\n    }\n\n    const UpdateBook = async (Book) => {\n        try {\n            const response = await axios.post(`/api/updateBook`, JSON.stringify(Book), {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                }\n            })\n        }\n        catch (e) {\n            console.log(e);\n        }\n    }\n\n    return (\n        <AuthContext.Provider value={{\n            token, getIssueBooks, setIssue,\n            issue, entertainment, biography, humour, poetry\n            , art, getBooks, issueBooks, getReturnBooks, returned\n            , deleteIssue, requestbook, results, searchbook, role\n            , getRequestedBooks, requested, deletereq, addbook\n            , getFine, fine, deleteBook, setToken, setRole, update, role,\n            getStatus, requestStatus, updateStatus, UpdateBook, user, setUser\n        }}>{children}</AuthContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}